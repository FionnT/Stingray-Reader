
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>stingray.schema_instance module &#8212; Stingray-Reader 5.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="stingray.workbook module" href="stingray.workbook.html" />
    <link rel="prev" title="stingray.implementations module" href="stingray.implementations.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-stingray.schema_instance">
<span id="stingray-schema-instance-module"></span><h1>stingray.schema_instance module<a class="headerlink" href="#module-stingray.schema_instance" title="Permalink to this headline">¶</a></h1>
<section id="schema-and-navigation-models">
<h2>Schema and Navigation models.<a class="headerlink" href="#schema-and-navigation-models" title="Permalink to this headline">¶</a></h2>
<p>A number of file formats require a schema to unpack (or decode) the data. Even a simple CSV file offers headings in
the first row as a kind of schema. Each row can be interpreted as a dictionary where the headers are keys.</p>
<p>The JSON Schema permits definition of a schema that can be used to navigate spreadsheet files, like CSV. It can be
used to unpack more sophisticated generic structures in JSON, YAML, and TOML format, as well as XML.</p>
<p>It can also be used to unpack COBOL files, in Unicode or ASCII text as well as EBCDIC. Most of the features of a
COBOL DDE definition parallel JSON Schema constructs.</p>
<ul class="simple">
<li><p>COBOL has Atomic fields of type text (with vaious format details), and a variety of “Computational” variants. The
most important is <cite>COMP-3</cite>, which is a decimal representation with digits packed two per byte. THe JSON Schema
presumes types “null”, “boolean”, “number”, or “string” types have text representations that fit well with COBOL.</p></li>
<li><p>The hierarchy of COBOL DDE’s is the JSON Schema “object” type.</p></li>
<li><p>The COBOL <cite>OCCURS</cite> clause is the JSON Schema “array” type. The simple case, with a single, literal <cite>TIMES</cite> option
is expressed with <cite>maxItems</cite> and <cite>minItems</cite>.</p></li>
</ul>
<p>While COBOL is more sophisticated than CSV, it’s generally comprarable to JSON/YAML/TOML/XML. There are some unique
specializations related to COBOL processing.</p>
<section id="cobol-processing">
<h3>COBOL Processing<a class="headerlink" href="#cobol-processing" title="Permalink to this headline">¶</a></h3>
<p>The parallels between COBOL and JSON Schema suggest that COBOL Data Definition Entries (DDE’s) can be translated to
JSON Schema constructs. The JSON Schema (with extensions) can be used to decode bytes from COBOL representation to
create native Python objects. There are three areas: handling <cite>REDEFINES</cite>,  <cite>OCCURS DEPENDING ON</cite> structures,
and EBCDIC unpacking.</p>
<section id="redefines">
<h4>Redefines<a class="headerlink" href="#redefines" title="Permalink to this headline">¶</a></h4>
<p>A COBOL <cite>REDEFINES</cite> clause defines a free union of types for a given sequence of bytes. Within the application code,
there are generally fields that imply a more useful tagged union. The tags used for discrimination is not part of the
COBOL definition.</p>
<p>To make this work, each field within the JSON schema has an implied starting offset and length.
A COBOL <cite>REDEFINES</cite> clause can be described with a JSON Schema extension that includes a JSON Pointer to name a field with which a given field is co-located.</p>
<p>The COBOL language requires a strict backwards reference to a previously-defined field, and the names must have the
name indentation level, making them peers within the same parent, reducing the need for complex pointers.</p>
</section>
<section id="occurs-depending-on">
<h4>Occurs Depending On<a class="headerlink" href="#occurs-depending-on" title="Permalink to this headline">¶</a></h4>
<p>The complexity of <cite>OCCURS DEPENDING ON</cite> constructs arises because the size (<cite>maxItems</cite>) of the array is the value of
another field in the COBOL record definition.</p>
<p>Ideally, a JSON Reference names the referenced field as the <cite>maxItems</cite> attribute for an array. This, however,
is not supported, so an extension vocabulary is required.</p>
</section>
<section id="ebcdic-unpacking">
<h4>EBCDIC Unpacking<a class="headerlink" href="#ebcdic-unpacking" title="Permalink to this headline">¶</a></h4>
<p>There are a number of distinctive data types used by COBOL and represented in EBCDIC. The most notable of these is
the packed decimal representation of numbers. Each byte has two decimal digits. The final byte as a digit and sign
information in the lower four bits.</p>
<p>Further, COBOL records have a “RECFM” wrapper that may include bytes to describe the record’s physical length.</p>
</section>
<section id="notes">
<h4>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h4>
<p>See <a class="reference external" href="https://json-schema.org/draft/2020-12/relative-json-pointer.html#RFC6901">https://json-schema.org/draft/2020-12/relative-json-pointer.html#RFC6901</a> for information on JSON Pointers.</p>
</section>
<section id="terminology">
<h4>Terminology<a class="headerlink" href="#terminology" title="Permalink to this headline">¶</a></h4>
<p>The JSON Schema specification talks about the data described by the schema as a “instance” of the schema. The schema
is essentially a class of object, the data is an instance of that class.</p>
<p>It’s awkward to distinguish the more general use of “instance” from the specific use of “Instance of a JSON Schema”.
We’ll try to use <cite>Instance</cite>, and <cite>NDInstance</cite> to talk about the object described by a JSON Schema.</p>
</section>
</section>
<section id="goals">
<h3>Goals<a class="headerlink" href="#goals" title="Permalink to this headline">¶</a></h3>
<p>Stingray Reader must support Delimited Files (JSON, YAML, TOML, and XML) as well as Non-Delimited Files, typified by COBOL. Other non-delimited formats should be describable. Additionally, workbook formats like XLSX, ODS, Numbers, and CSV should be handled properly.</p>
<p>The JSON Schema can be used to provide validation of an instance. It can also be used to unpack the instance. In the case of COBOL, the unpacking must be done lazily to properly handle <cite>REDEFINES</cite> and <cite>OCCURS DEPENDING ON</cite>.</p>
<section id="delimited-files">
<h4>Delimited Files<a class="headerlink" href="#delimited-files" title="Permalink to this headline">¶</a></h4>
<p>Delimited files have text representations with syntax defined by a module like <cite>json</cite>. Because of the presence of delimiters, individual character and byte counting isn’t relevant.</p>
<p>Pythonic navigation through instances of delimited structures leverages the physical format’s parser output. Since most formats provide a mixture of dictionaries and lists, <cite>object[“field”]</cite> and <cite>object[index]</cite> work nicely.</p>
<p>The JSON Schema structure will parallel the instance structure.</p>
</section>
<section id="workbook-files">
<h4>Workbook Files<a class="headerlink" href="#workbook-files" title="Permalink to this headline">¶</a></h4>
<p>Files may also be complex binary objects described by workbook file for XLSX, ODS, Numbers, or CSV files. To an extent, these are somewhat like delimited files, since individual character and byte counting isn’t relevant.</p>
<p>Pythonic navigation through instances of workbook row structures leverages the workbook format’s parser output. Most workbooks are lists of cells; a schema with a flat list of properties will work nicely.</p>
<p>The <cite>csv</cite> fornmat is built-in. It’s more like a workbook than it is like JSON or TPOML. For example, with simple CSV files, the JSON Schema must be a flat list of properties corresponding to the columns.</p>
</section>
<section id="non-delimited-files-cobol">
<h4>Non-Delimited Files (COBOL)<a class="headerlink" href="#non-delimited-files-cobol" title="Permalink to this headline">¶</a></h4>
<p>It’s essential to provide Pythonic navigation through a COBOL structure. Because of <cite>REDEFINES</cite> clauses, the COBOL structure may not map directly to simple Pythonic dict and list types. Instead, the evaluation of each field must be strictly lazy.</p>
<p>This suggests several target constructs.</p>
<ul class="simple">
<li><p><cite>object.name(“field”).value()</cite> should catapult down through the instance to the named field. Syntactic sugar might include <cite>object[“field”]</cite> or <cite>object.field</cite>. Note that COBOL raises a compile-time error for a reference to an amiguous name; names may be duplicated, but the duplicates must be disambiguated with <cite>OF</cite> clauses.</p></li>
<li><p><cite>object.name(“field”).index(x).value()</cite> works when the field is a member of an array somewhere above it in the structure. Syntactic sugar might include <cite>object[“field”][x]</cite> or <cite>object.field[x]</cite>.</p></li>
</ul>
<p>These constructs are abbreviations for explicit field-by-field navigation. The field-by-field navigation involves explicitly naming all parent fields. Here are some constructs.</p>
<ul class="simple">
<li><p><cite>object.name(“parent”).name(“child”).name(“field”).value()</cite> is the full navigation path to a nested field. This can be <cite>object[“parent”][“child”][“field”]</cite>. A more sophisticated parser for URL path syntax might also be supported. <cite>object.name[“parent/child/field”]</cite>.</p></li>
<li><p><cite>object.name(“parent”).name(“child”).index(x).name(“field”).value()</cite> is the full navigation path to a nesteed field with a parent occurs-depending-on clause. This can be <cite>object[“parent”][“child”][x][“field”]</cite>. A more sophisticated parser for URL path syntax might also be supported. <cite>object.name[“parent/child/0/field”]</cite>.</p></li>
</ul>
<p>The COBOL <cite>OF</cite> construct provides parentage in reverse order. This means <cite>object.name(“field”).of(“child”).of(“parent”).value()</cite> is requred to parallel COBOL syntax. While unpleasant, it’s helpful to support this.</p>
<p>The <cite>value()</cite> method can be helpful to be explicit about locating a value. This avoids eager evaluation of <cite>REDEFINES</cite> alternatives that happen to be invalid.</p>
<p>An alternative to the <cite>value()</cite> method is to use built-in special names <cite>__int__()</cite>, <cite>__float__()</cite>, <cite>__str__()</cite>, <cite>__bool__()</cite> to do conversion to a primitive type; i.e., <cite>int(object.name[“parent/child/field”])</cite>. Additional functions like <cite>asdict()</cite>, <cite>aslist()</cite>, and <cite>asdecimal()</cite> can be provided to handle conversion edge cases.</p>
<p>We show these as multi-step operations with a fluent interface. This works out well when a nagivation context object is associated with each sequence of <cite>object.name()…</cite>, <cite>object.index()</cite>, and <cite>object.of()</cite> operations. The first call in the sequence emits a navigation object; all subsequent steps in the fluent interface return navigation objects. The final <cite>value()</cite> or other special method refers back to the original instance container for type conversion of an atomic field.</p>
<p>Each COBOL navigation step involves two parallel operations:</p>
<ul class="simple">
<li><p>Finding the definition of the named subschema within a JSON schema.</p></li>
<li><p>Locating the sub-instance for the item. This is a slice of the instance.</p></li>
</ul>
<p>The instance is a buffer of bytes (or characters for non-COBOL file processing.) The overall COBOL record has a starting offset of zero. Each DDE has an starting offset and length. For object property navigation this is the offset to the named property that describes the DDE. For array navigation, this is the index to a subinstance within an array of subinstances.</p>
<p>It’s common practice in COBOL to use a non-atomic field as if it was atomic. A date field, for example, may have year, month, and day subfields that are rarely used independently. This means that JSON Schema array and object definitions are implicitly <cite>type: “string”</cite> to parallel the way COBOL treats non-atomic fields as <cite>USAGE IS DISPLAY</cite>.</p>
</section>
</section>
<section id="formal-definitions-for-non-delimited-files">
<h3>Formal Definitions for Non-Delimited Files<a class="headerlink" href="#formal-definitions-for-non-delimited-files" title="Permalink to this headline">¶</a></h3>
<p>One approach to locating field values in a nested COBOL object with <cite>REDEFINES</cite> and <cite>OCCURS DEPENDING ON</cite> is to decorate the schema with instance location details for each item in the schema based on the current value of the instance.</p>
<p>This handles <cite>OCCURS DEPENDING ON</cite> by computing unique decorations for each instance.</p>
<p>We’ll describe this as being done eagerly. Pragmatically, it can be done lazily and cached. The <cite>REDEFINES</cite> is handled by application program logic to avoid references to invalid data.</p>
<p>The instance, <span class="math notranslate nohighlight">\(I\)</span>, is an array of <span class="math notranslate nohighlight">\(b\)</span> characters or bytes.</p>
<div class="math notranslate nohighlight">
\[I = \{ i_0, i_1, i_2, ..., i_{b-1} \}\]</div>
<p>We can slice <span class="math notranslate nohighlight">\(I\)</span> using start, <span class="math notranslate nohighlight">\(s\)</span>, and end, <span class="math notranslate nohighlight">\(e\)</span> locations to create sub-instances.</p>
<div class="math notranslate nohighlight">
\[I[s: e] = \{ i_x \mid s \leq x &lt; e \}\]</div>
<p>It seems like <span class="math notranslate nohighlight">\(I_{s:e}\)</span> might be slightly more traditional notation than <span class="math notranslate nohighlight">\(I[s:e]\)</span>. <span class="math notranslate nohighlight">\(I_{\{x \mid s \leq x &lt; e\}}\)</span> seems fussy.</p>
<p>We can follow the Python convention of omitting <span class="math notranslate nohighlight">\(s\)</span> when <span class="math notranslate nohighlight">\(s = 0\)</span> and omitting <span class="math notranslate nohighlight">\(e\)</span> when <span class="math notranslate nohighlight">\(e = b\)</span>. This means that <span class="math notranslate nohighlight">\(I \equiv I[:]\)</span>.</p>
<p>A Schema, <span class="math notranslate nohighlight">\(S\)</span>, is a static description of a number of instances, <span class="math notranslate nohighlight">\(I_0, I_1, I_2, ...\)</span>. We say the schema models an instance: <span class="math notranslate nohighlight">\(S \tilde \models I\)</span>. The modelling is approximate; the model is incomplete. A more complete model requires resolution of <code class="docutils literal notranslate"><span class="pre">OCCURS</span> <span class="pre">DEPENDING</span> <span class="pre">ON</span></code> to compute locations, <span class="math notranslate nohighlight">\(L\)</span>. This is <span class="math notranslate nohighlight">\(S \circ L \models I\)</span>.
The schema, <span class="math notranslate nohighlight">\(S\)</span>, composed with additional location information, <span class="math notranslate nohighlight">\(L\)</span>, models the instance, <span class="math notranslate nohighlight">\(I\)</span>.</p>
<p>A Schema has a structure with three kinds of elements:</p>
<ul class="simple">
<li><p>Atomic, with no further structure. This has a type conversion (or “unpack”) function, <span class="math notranslate nohighlight">\(t(I)\)</span>, to extract a value from an instance.
It requires a length, <span class="math notranslate nohighlight">\(l\)</span>, that defines a slice from the instance.
We can say <span class="math notranslate nohighlight">\(t_{S}(I[:l])\)</span> to refer to the type conversion function for a specific Schema, <span class="math notranslate nohighlight">\(S\)</span>, used to decode an instance, <span class="math notranslate nohighlight">\(I\)</span>.
JSON Schema defines types of number, int, string, boolean, and null. Other types may need to be added to handle COBOL data.</p></li>
<li><p>Array, with an Items subschema, <span class="math notranslate nohighlight">\(S_i\)</span> that describes a repeating sub-instance.
The number of sub instances, <span class="math notranslate nohighlight">\(r\)</span> may be provided explicitly.
In the <code class="docutils literal notranslate"><span class="pre">OCCURS</span> <span class="pre">DEPENDING</span> <span class="pre">ON</span></code> case, the value of <span class="math notranslate nohighlight">\(r\)</span> is the value of another field.
This means <span class="math notranslate nohighlight">\(r = t_{S_d}(I)\)</span> because the ocurrences depend on the value in field <span class="math notranslate nohighlight">\(S_d\)</span>.</p></li>
<li><p>Object, with Properties structure that describes a number of subschema, <span class="math notranslate nohighlight">\(S_{p_x}\)</span>.</p></li>
</ul>
<p>We can summarize these three definitions as follows:</p>
<div class="math notranslate nohighlight">
\[\begin{split}S = \begin{cases}
    \langle t(I), l \rangle &amp;\text{if atomic} \\
    \langle S_i, r \rangle &amp;\text{if array} \\
    \{S_{p_0}, S_{p_1}, S_{p_2}, ...\} &amp;\text{if object}
\end{cases}\end{split}\]</div>
<p>The value of an instance, <span class="math notranslate nohighlight">\(I\)</span>, interpreted by given schema, <span class="math notranslate nohighlight">\(S\)</span>, is the type conversion function, <span class="math notranslate nohighlight">\(t_S(I)\)</span>, applied to a slice of the instance defined by the length, <span class="math notranslate nohighlight">\(l\)</span>, which is <span class="math notranslate nohighlight">\(I[:l_S]\)</span>.</p>
<div class="math notranslate nohighlight">
\[v = t_S(I[:l_S])\]</div>
<p>As suggested above, the <code class="docutils literal notranslate"><span class="pre">OCCURS</span> <span class="pre">DEPENDING</span> <span class="pre">ON</span></code> means the locations of sub-instances depend on  values elsewhere in the instance.</p>
<p>The starting location of a slice is computed for each schema item as follows:</p>
<ul class="simple">
<li><p>For an atomic item, it is the schema, <span class="math notranslate nohighlight">\(S\)</span>. The starting offset, <span class="math notranslate nohighlight">\(s\)</span>, is zero, and can be omitted, <span class="math notranslate nohighlight">\(I[s=0: l] \equiv I[:l]\)</span>.</p></li>
<li><p>For an array, each item within the array has its own start based on the index value, <span class="math notranslate nohighlight">\(x\)</span>, and the length of the item sub-schema, <span class="math notranslate nohighlight">\(S_i\)</span>. The start for a given index value, <span class="math notranslate nohighlight">\(s(x) = x \times l(S_i)\)</span>; <span class="math notranslate nohighlight">\(I[s: s+l] = I[x \times l(S_i): x \times l(S_i)+l(S_i)]\)</span>. The overall size of the array is <span class="math notranslate nohighlight">\(r \times l(S_i)\)</span>; note that <span class="math notranslate nohighlight">\(r\)</span> may be dependent on the value of another field.</p></li>
<li><p>For an object, each property begins after the previous property. <span class="math notranslate nohighlight">\(s(S_{p+1}) = s(S_{p}) + l(S_{p})\)</span>. This recurrence is a summation. <span class="math notranslate nohighlight">\(s(S_{p+1}) = \sum_{0 \leq i &lt; p+1}l(S_i)\)</span>.</p></li>
</ul>
<p>The length of a schema, <span class="math notranslate nohighlight">\(l(S)\)</span>, is the sum of the lengths of the items within the schema.</p>
<div class="math notranslate nohighlight">
\[\begin{split}l(S) = \begin{cases} l &amp;\text{if atomic} \\
                  l(S_i) \times r &amp;\text{if array} \\
                  \sum_{S_{p} \in S} l(S_{p}) &amp;\text{if object}
    \end{cases}\end{split}\]</div>
<p>This can be unrolled into a top-down, post-order traversal of the schema to create Location objects.</p>
</section>
<section id="json-schema-considerations">
<h3>JSON Schema Considerations<a class="headerlink" href="#json-schema-considerations" title="Permalink to this headline">¶</a></h3>
<p>JSON Schema is focused on delimited data where a parser has handled data type conversions.</p>
<p>We require some extensions or adaptations to cover issues that not handled well by JSON Schema.</p>
<ul class="simple">
<li><p>COBOL encoded data (Packed-Decimal, Binary, etc.) JSON Schema presumes delimited files with a parser’s conversions of data. We are driving the parser from the JSON Schema, and additional details are required.</p></li>
<li><p>Occurs Depending On reference. JSON Schema limits the <cite>maxItems</cite> to an unsigned integer. We need to <cite>$ref</cite>, and an extension vocabulary is required.</p></li>
<li><p>Workbook conversions of numeric data to durations or timestamps. This distinct from the <cite>format</cite> option on a <cite>“type”: “string”</cite> where the format provides a pattern for parsing text. We need to specify an additional conversion.</p></li>
</ul>
<p>See <a class="reference external" href="https://github.com/json-schema-org/json-schema-spec">https://github.com/json-schema-org/json-schema-spec</a> for the meta schema used to define a schema.</p>
<p>We have two overall strategies: Update the meta schema or adapt to the existing meta schema.</p>
<section id="update-the-meta-schema">
<h4>Update the meta schema<a class="headerlink" href="#update-the-meta-schema" title="Permalink to this headline">¶</a></h4>
<p>We could make some changes to the JSON Schema meta schema through a vocabulary addition.</p>
<ul class="simple">
<li><p>Add a new <cite>decimal</cite> type to the validation vocabulary.</p></li>
<li><p>Permit a <cite>$ref</cite> validation for <cite>“maxItems”</cite> in the array vocabulary.</p></li>
<li><p>Additional unpacking details for “integer” and “number” are needed. Currently “format” is used for strings. We could expand it’s use to include encoding details for numbers. This would support bigendian integers, bigendian floats, packed decimal, and zoned decimal number, integer, and decimal values.</p></li>
<li><p>Additional conversion details for Workbook numbers that are encodings of durations or timestamps.</p></li>
</ul>
<p>We can then use a revised meta schema to validate the schema used for Workbooks or COBOL.</p>
</section>
<section id="adapt-to-the-existing-meta-schema">
<h4>Adapt to the existing meta schema<a class="headerlink" href="#adapt-to-the-existing-meta-schema" title="Permalink to this headline">¶</a></h4>
<p>We could adapt to the existing JSON Schema meta schema.</p>
<p>We <em>can</em> consider COBOL encoded numeric values as <cite>“type”: “string”</cite> with additional <cite>“contentEncoding”</cite> details. Calling these values strings seems to push the envelope a bit: JSON Schema generally avoies syntax and unpacking issues. The value truly is a number.</p>
<p>It seems improper to require a separate type conversion to create the needed, Python-specific <cite>Decimal</cite>.  A conversion can be <em>implicit</em>, using the “cobol” keyword value. Or, it can be <em>explicit</em>, using a new “conversion” keyword for extended types like timestamp, duration based on float, and <cite>Decimal</cite> based unpacking bytes.</p>
<p>This is the approach taken for Workbook values like durations and timestamps. A supplemental <cite>“format”: “duration”</cite> is used to parse a string that encodes a duration value. Parsers, generally, don’t do anything with this. Validation can be handled to conform the string matches the format. Decoding a useful object is left to the application.</p>
<p>The <cite>“contentEncoding”</cite> provides a way to describe COBOL Packed Decimal and Binary as strings of bytes. A <cite>“cobol”</cite> keyword gets Usage and Picture values required to decode EBCDIC.</p>
<p>Here’s an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
 <span class="s2">&quot;contentEncoding&quot;</span><span class="p">:</span> <span class="s2">&quot;packed-decimal&quot;</span><span class="p">,</span>
 <span class="s2">&quot;cobol&quot;</span><span class="p">:</span> <span class="s2">&quot;05 SOME-FIELD USAGE COMP-3 PIC S999V99&quot;</span><span class="p">,</span>
 <span class="s2">&quot;conversion&quot;</span><span class="p">:</span> <span class="s2">&quot;decimal&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Other <cite>“contentEncoding”</cite> values include “bigendian-h”,  “bigendian-i”, “bigendian-q” (for short, int, and long long values.) Also, “bigendian-float” and “bigendian-double”. And, of course, “CP037” or “EBCDIC” to decode ordinary strings from EBCDIC to native text.</p>
<p>This permits a little more flexibility for moving to native (non-EBCDIC) file formats. Instead of the “cobol” keyword to propvide unpackong details, we can use a “struct” keyword to provide Python’s “struct” module format codes.</p>
<p>Also, we need to add “maxItemsDependsOn” keyword to include the “$ref” value for arrays. Here’s an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
 <span class="s2">&quot;maxItemsDependsOn&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/path/to/SIZE-FIELD&quot;</span><span class="p">},</span>
 <span class="s2">&quot;cobol&quot;</span><span class="p">:</span> <span class="s2">&quot;05 THINGS OCCURS DEPENDING ON SIZE-FIELD&quot;</span><span class="p">,</span>
 <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>For <cite>REDEFINES</cite>, we use the existing “oneOf”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;REDEFINES-A-B-C&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;oneOf&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">}}},</span>
        <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}}},</span>
        <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">}}},</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To provide COBOL-style naming to OneOf/REDEFINES schema, we impose a rule that each alternative must be an object, and each object must have at most one named property. The parent item is effectively anonymous, since it’s never used in COBOL.</p>
</section>
</section>
<section id="schema-design">
<h3>Schema Design<a class="headerlink" href="#schema-design" title="Permalink to this headline">¶</a></h3>
<p>Here is the extended JSON Schema definition.
This is a translation of the various JSON Schema constructs into Python class definitions.
These objects must be considered immutable. (Pragmatically, RefTo objects can be updated
to resolve forward references.)</p>
<p>A <a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><code class="xref py py-class docutils literal notranslate"><span class="pre">Schema</span></code></a> is used to describe an <code class="xref py py-class docutils literal notranslate"><span class="pre">Instance</span></code>.
For non-delimited instances, the schema requires additional <a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><code class="xref py py-class docutils literal notranslate"><span class="pre">Location</span></code></a> information;
this must be computed lazily to permits <code class="docutils literal notranslate"><span class="pre">OCCURS</span> <span class="pre">DEPENDING</span> <span class="pre">ON</span></code> to work.
For delimited instances, no additional data is required, since the parser located all object
boundaries and did conversions to Python types. Similarly, for workbook instances, the
underlying workbook parser can create a row of Python objects.</p>
<p>The <cite>DependsOnArraySchema</cite> is an extension to handle references to another
field’s value to provide <code class="docutils literal notranslate"><span class="pre">minItems</span></code> and <code class="docutils literal notranslate"><span class="pre">maxItems</span></code> for an array.
This handles the COBOL <code class="docutils literal notranslate"><span class="pre">OCCURS</span> <span class="pre">DEPENDING</span> <span class="pre">ON</span></code>. This requires a reference to another
field which is a reference to another field instead of a simple value.</p>
<p>The COBOL <code class="docutils literal notranslate"><span class="pre">REDEFINES</span></code> clause is handled created a OneOf suite of alternatives
and using some JSON Schema “$ref” references to preserve the original, relatively flat
naming for an elements and the element(s) which redefine it.</p>
<p class="plantuml">
<img src="../_images/plantuml-b8900b40714b7f5ecb489044e4477660de5461af.png" alt="&#64;startuml
    abstract class Schema {
        type: string
    }

    class AtomicSchema

    class ArraySchema

    class DependsOnArraySchema

    class ObjectSchema

    class OneOfSchema

    class RefToSchema

    Schema &lt;|-- AtomicSchema
    Schema &lt;|-- ArraySchema
    Schema &lt;|-- ObjectSchema
    AtomicSchema &lt;|-- OneOfSchema
    AtomicSchema &lt;|-- RefToSchema
    ArraySchema &lt;|-- DependsOnArraySchema
    RefToSchema --&gt; Schema
    'OneOfSchema --&gt; &quot;*&quot; Schema : Redefines
    'ObjectSchema --&gt; &quot;*&quot; Schema : Properties
    'ArraySchema --&gt; Schema : Items
    'DependsOnArraySchema --&gt; Schema : maxItems
&#64;enduml"/>
</p>
<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.ArrayLocation">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">ArrayLocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_count</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.ArrayLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Location</span></code></a></p>
<p>type(Schema) == ArraySchema
The location of an array of instances with the same schema. A COBOL <code class="docutils literal notranslate"><span class="pre">OCCURS</span></code> item.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.ArrayLocation.dump_iter">
<span class="sig-name descname"><span class="pre">dump_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nav</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><span class="pre">stingray.schema_instance.NDNav</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.ArrayLocation.dump_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>An Iterator over tuples of (indent, Location, array indices, raw bytes, value)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.ArrayLocation.raw">
<span class="sig-name descname"><span class="pre">raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.ArrayLocation.raw" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.ArrayLocation.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.ArrayLocation.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.ArraySchema">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">ArraySchema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.ArraySchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Schema</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.ArraySchema.dump_iter">
<span class="sig-name descname"><span class="pre">dump_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nav</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><span class="pre">stingray.schema_instance.Nav</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">'Schema'</span><span class="p"><span class="pre">,</span> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.ArraySchema.dump_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield nesting, schema, indices, and object</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.ArraySchema.items">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">items</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></em><a class="headerlink" href="#stingray.schema_instance.ArraySchema.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.ArraySchema.maxItems">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">maxItems</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#stingray.schema_instance.ArraySchema.maxItems" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.ArraySchema.print">
<span class="sig-name descname"><span class="pre">print</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hide</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.ArraySchema.print" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.AtomicLocation">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">AtomicLocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.AtomicLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Location</span></code></a></p>
<p>type(Schema) == AtomicSchema
The location of a COBOL elementary item.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.AtomicLocation.dump_iter">
<span class="sig-name descname"><span class="pre">dump_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nav</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><span class="pre">stingray.schema_instance.NDNav</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.AtomicLocation.dump_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>An Iterator over tuples of (indent, Location, array indices, raw bytes, value)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.AtomicLocation.raw">
<span class="sig-name descname"><span class="pre">raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.AtomicLocation.raw" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.AtomicLocation.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.AtomicLocation.value" title="Permalink to this definition">¶</a></dt>
<dd><p>For an atomic value, locate the underlying value. This may involve unpacking.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.AtomicSchema">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">AtomicSchema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.AtomicSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Schema</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.BytesInstance">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">BytesInstance</span></span><a class="headerlink" href="#stingray.schema_instance.BytesInstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></p>
<p>Fulfills the protocol for an <code class="docutils literal notranslate"><span class="pre">NDInstance</span></code>, useful for <code class="docutils literal notranslate"><span class="pre">EBCDIC</span></code> and <code class="docutils literal notranslate"><span class="pre">StructUnpacker</span></code>
Unpackers.</p>
<p>To create an <a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><code class="xref py py-class docutils literal notranslate"><span class="pre">NDNav</span></code></a>, this object requires two things:
- A <cite>Schema</cite> used to create <cite>Location</cite> objects.
- An <cite>NonDelimited</cite> subclass of <cite>Unpacker</cite> to provide physical format details like size and unpacking.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaMaker</span><span class="o">.</span><span class="n">from_json</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;field-1&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;cobol&quot;</span><span class="p">:</span> <span class="s2">&quot;PIC X(12)&quot;</span><span class="p">}}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpacker</span> <span class="o">=</span> <span class="n">EBCDIC</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">BytesInstance</span><span class="p">(</span><span class="s1">&#39;blahblahblah&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;CP037&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpacker</span><span class="o">.</span><span class="n">nav</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s2">&quot;field-1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
<span class="go">&#39;blahblahblah&#39;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Sheet.row_iter()</span></code> build <code class="docutils literal notranslate"><span class="pre">Row</span></code> objects that wrap an unpacker, schema, and instance.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.CSVNav">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">CSVNav</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unpacker</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Unpacker" title="stingray.schema_instance.Unpacker"><span class="pre">stingray.schema_instance.Unpacker</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.WBInstance" title="stingray.schema_instance.WBInstance"><span class="pre">stingray.schema_instance.WBInstance</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.WBInstance" title="stingray.schema_instance.WBInstance"><span class="pre">stingray.schema_instance.WBInstance</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.CSVNav" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.WBNav" title="stingray.schema_instance.WBNav"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.WBNav</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.DInstance">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">DInstance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.DInstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Protocol</span></code></p>
<p>JSON/YAML/TOML documents are wild and free.
Pragmatically, we want o supplement these classes with methods
that emit <code class="docutils literal notranslate"><span class="pre">DNav</span></code> objects to manage navigating an object and a schema in parallel.</p>
<p>Not sure this is useful…</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.DInstance.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.DInstance" title="stingray.schema_instance.DInstance"><span class="pre">stingray.schema_instance.DInstance</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.DInstance.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.DInstance.unpacker">
<span class="sig-name descname"><span class="pre">unpacker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unpacker</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Delimited" title="stingray.schema_instance.Delimited"><span class="pre">stingray.schema_instance.Delimited</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.DInstance" title="stingray.schema_instance.DInstance"><span class="pre">stingray.schema_instance.DInstance</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.DInstance.unpacker" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.DNav">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">DNav</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unpacker</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Unpacker" title="stingray.schema_instance.Unpacker"><span class="pre">stingray.schema_instance.Unpacker</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.DInstance" title="stingray.schema_instance.DInstance"><span class="pre">stingray.schema_instance.DInstance</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.DNav" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Nav</span></code></a></p>
<p>Navigate through a <code class="docutils literal notranslate"><span class="pre">DInstance</span></code> using a <code class="docutils literal notranslate"><span class="pre">Schema</span></code>.
This is a wrapper around a <code class="docutils literal notranslate"><span class="pre">JSON</span></code> document.</p>
<p>Note that these objects have an inherent ambiguity. 
A JSON document can have the form of a dictionary with names and values.
The schema <em>also</em> names the properties and suggests types.
If the two don’t agree, that’s an instance error, spotted by schema validation.</p>
<p>The JSON/YAML/TOML parsers have types implied by syntax and the schema <em>also</em> has types.</p>
<p>We need an option to validate the instance against the schema.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.DNav.dump">
<span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.DNav.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Navigates a Delimited instance schema and values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.DNav.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.DNav" title="stingray.schema_instance.DNav"><span class="pre">stingray.schema_instance.DNav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.DNav.index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.DNav.name">
<span class="sig-name descname"><span class="pre">name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.DNav" title="stingray.schema_instance.DNav"><span class="pre">stingray.schema_instance.DNav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.DNav.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.DNav.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.DNav.value" title="Permalink to this definition">¶</a></dt>
<dd><p>The final Python value from the current schema.
Consider refactoring to use Unpacker explicitly</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.Delimited">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">Delimited</span></span><a class="headerlink" href="#stingray.schema_instance.Delimited" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Unpacker" title="stingray.schema_instance.Unpacker"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Unpacker</span></code></a>[<a class="reference internal" href="#stingray.schema_instance.DInstance" title="stingray.schema_instance.DInstance"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.DInstance</span></code></a>]</p>
<p>An Abstract Unpacker for delimited instances, i.e. <code class="docutils literal notranslate"><span class="pre">JSON</span></code> documents.</p>
<p>An instance will be <code class="docutils literal notranslate"><span class="pre">list[Any]</span> <span class="pre">|</span> <span class="pre">dict[str,</span> <span class="pre">Any]</span> <span class="pre">|</span> <span class="pre">Any</span></code>.
It will is built by a separate parser, often <code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code>, YAML, or TOML.</p>
<p>For JSON/YAML/TOML, the instance <em>should</em> have the same structure as the schema.
JSONSchema validation can be applied to confirm this.</p>
<p>For XML, the source instance should be transformed into native Python objects, following
a schema definition. A schema structure may ignore XML tags or extract text from a tag
with a mixed content model.</p>
<p>The sizes and formats of delimited data don’t matter:
the <a class="reference internal" href="#stingray.schema_instance.Delimited.calcsize" title="stingray.schema_instance.Delimited.calcsize"><code class="xref py py-func docutils literal notranslate"><span class="pre">calcsize()</span></code></a> function returns 1 to act as a position in a sequence of values.</p>
<p>Concrete subclasses include open, close, and instance_iter.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Delimited.calcsize">
<span class="sig-name descname"><span class="pre">calcsize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#stingray.schema_instance.Delimited.calcsize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Delimited.nav">
<span class="sig-name descname"><span class="pre">nav</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.DInstance" title="stingray.schema_instance.DInstance"><span class="pre">stingray.schema_instance.DInstance</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><span class="pre">stingray.schema_instance.Nav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.Delimited.nav" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Delimited.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.DInstance" title="stingray.schema_instance.DInstance"><span class="pre">stingray.schema_instance.DInstance</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.Delimited.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.DependsOnArraySchema">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">DependsOnArraySchema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_to</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.DependsOnArraySchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.ArraySchema" title="stingray.schema_instance.ArraySchema"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.ArraySchema</span></code></a></p>
<p>An array with a size that depends on another field.
The extension “maxItemsDependsOn” attribute has a reference to another
field in this definition.</p>
<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.DependsOnArraySchema.maxItems">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">maxItems</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#stingray.schema_instance.DependsOnArraySchema.maxItems" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="stingray.schema_instance.DesignError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">DesignError</span></span><a class="headerlink" href="#stingray.schema_instance.DesignError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseException</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.EBCDIC">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">EBCDIC</span></span><a class="headerlink" href="#stingray.schema_instance.EBCDIC" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Unpacker" title="stingray.schema_instance.Unpacker"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Unpacker</span></code></a>[<a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.NDInstance</span></code></a>]</p>
<p>Unpacker for Non-Delimited EBCDIC bytes.</p>
<p>Uses <code class="xref py py-mod docutils literal notranslate"><span class="pre">estruct</span></code> module for calcsize and value of Big-Endian, EBCDIC data.
This requires the “cobol” and “conversion” keywords, part of the extended vocabulary for COBOL.
A <cite>“cobol”</cite> keyword gets Usage and Picture values required to decode EBCDIC. 
A “conversion” keyword converts to a more useful Python type.</p>
<p>This assumes the 
COBOL encoded numeric can be <code class="docutils literal notranslate"><span class="pre">&quot;type&quot;:</span> <span class="pre">&quot;string&quot;</span></code> with additional <code class="docutils literal notranslate"><span class="pre">&quot;contentEncoding&quot;</span></code> details.</p>
<p>This class implements a <code class="docutils literal notranslate"><span class="pre">&quot;contentEncoding&quot;</span></code> using values of “packed-decimal”, and “cp037”,
to unwind COBOL Packed Decimal and Binary as strings of bytes.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.EBCDIC.calcsize">
<span class="sig-name descname"><span class="pre">calcsize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#stingray.schema_instance.EBCDIC.calcsize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.EBCDIC.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.EBCDIC.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.EBCDIC.instance_iter">
<span class="sig-name descname"><span class="pre">instance_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sheet</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recfm_class</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="stingray.estruct.html#stingray.estruct.RECFM_Reader" title="stingray.estruct.RECFM_Reader"><span class="pre">stingray.estruct.RECFM_Reader</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lrecl</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.EBCDIC.instance_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Delegate instance iteration to a recfm_parser instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.EBCDIC.nav">
<span class="sig-name descname"><span class="pre">nav</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><span class="pre">stingray.schema_instance.NDNav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.EBCDIC.nav" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.EBCDIC.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_object</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">IO</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">IO</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.EBCDIC.open" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.EBCDIC.sheet_iter">
<span class="sig-name descname"><span class="pre">sheet_iter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.EBCDIC.sheet_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.EBCDIC.used">
<span class="sig-name descname"><span class="pre">used</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.EBCDIC.used" title="Permalink to this definition">¶</a></dt>
<dd><p>Delegate number of bytes consumed to the recfm_parser.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.EBCDIC.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.EBCDIC.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.Location">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">Location</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.Location" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>A Location is used to navigate within an <cite>NDInstance</cite> objects.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Unpacker[NDInstance]</span></code> strategy is a subclass of NonDelimited,
one of EBCDIC(), Struct(), or TextUnpacker().</p>
<p>The value() method delegates the work to the <code class="docutils literal notranslate"><span class="pre">Unpacker</span></code> strategy.</p>
<p>TODO: Add unpacker and locationMaker to __init__() method.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Location.dump_iter">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">dump_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nav</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><span class="pre">stingray.schema_instance.NDNav</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">'Location'</span><span class="p"><span class="pre">,</span> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.Location.dump_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Location.raw">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.Location.raw" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.Location.referent">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">referent</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a></em><a class="headerlink" href="#stingray.schema_instance.Location.referent" title="Permalink to this definition">¶</a></dt>
<dd><p>Most things refer to themselves. a RefToLocation, however, overrides this.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Location.value">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.Location.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.LocationMaker">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">LocationMaker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unpacker</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Unpacker" title="stingray.schema_instance.Unpacker"><span class="pre">stingray.schema_instance.Unpacker</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.LocationMaker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Creates <code class="docutils literal notranslate"><span class="pre">Location</span></code> objects to find sub-instances in a non-delimited <code class="docutils literal notranslate"><span class="pre">NDInstance</span></code>.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">LocationMaker</span></code> walks through a <code class="docutils literal notranslate"><span class="pre">Schema</span></code> structure applied to a <code class="docutils literal notranslate"><span class="pre">NDInstance</span></code> to
emit <code class="docutils literal notranslate"><span class="pre">Location</span></code> objects. This is based on the current values in the <cite>NDInstance</cite>,
to support providing a properly-computed value for <code class="docutils literal notranslate"><span class="pre">OCCURS</span> <span class="pre">DEPENDING</span> <span class="pre">ON</span></code> arrays.</p>
<p>This is based on an <cite>NDUnpacker</cite> definition of the physical format of the file.
It’s only used for non-delimited files where the underlying <cite>NDInstance</cite> is <cite>Union[bytes, str]</cite>.</p>
<p>This creates <code class="docutils literal notranslate"><span class="pre">NDNav</span></code> isntances for navigation through Non-Delimited instances.</p>
<p>The algorithm is a post-order traversal of the subschema to build <cite>Location</cite> instances
that contain references to their children.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.LocationMaker.from_instance">
<span class="sig-name descname"><span class="pre">from_instance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.LocationMaker.from_instance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.LocationMaker.from_schema">
<span class="sig-name descname"><span class="pre">from_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.LocationMaker.from_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>May raise an exception if there is an <code class="docutils literal notranslate"><span class="pre">OCCURS</span> <span class="pre">DEPENDING</span> <span class="pre">ON</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.LocationMaker.ndnav">
<span class="sig-name descname"><span class="pre">ndnav</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><span class="pre">stingray.schema_instance.NDNav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.LocationMaker.ndnav" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.LocationMaker.size">
<span class="sig-name descname"><span class="pre">size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#stingray.schema_instance.LocationMaker.size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.LocationMaker.walk">
<span class="sig-name descname"><span class="pre">walk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.LocationMaker.walk" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.Mode">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">Mode</span></span><a class="headerlink" href="#stingray.schema_instance.Mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="stingray.schema_instance.Mode.BINARY">
<span class="sig-name descname"><span class="pre">BINARY</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'rb'</span></em><a class="headerlink" href="#stingray.schema_instance.Mode.BINARY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="stingray.schema_instance.Mode.TEXT">
<span class="sig-name descname"><span class="pre">TEXT</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'r'</span></em><a class="headerlink" href="#stingray.schema_instance.Mode.TEXT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.NDInstance">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">NDInstance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.NDInstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Protocol</span></code></p>
<p>The essential features of a non-delimited instance.
The underlying data is <code class="docutils literal notranslate"><span class="pre">AnyStr</span></code>, either bytes or text.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.NDInstance.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.NDInstance.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.NDInstance.unpacker">
<span class="sig-name descname"><span class="pre">unpacker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unpacker</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Unpacker" title="stingray.schema_instance.Unpacker"><span class="pre">stingray.schema_instance.Unpacker</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.NDInstance.unpacker" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.NDNav">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">NDNav</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unpacker</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Unpacker" title="stingray.schema_instance.Unpacker"><span class="pre">stingray.schema_instance.Unpacker</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.NDNav" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Nav</span></code></a></p>
<p>Navigate through an <code class="docutils literal notranslate"><span class="pre">NDInstance</span></code> using <code class="docutils literal notranslate"><span class="pre">Location</span></code> as a helper.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.NDNav.dump">
<span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.NDNav.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Navigates a non-delimited Schema using <a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><code class="xref py py-class docutils literal notranslate"><span class="pre">Location</span></code></a> (based on the Schema)
to expose values in the instance.
This is similar to the way DNav and WBNav objects work.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.NDNav.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><span class="pre">stingray.schema_instance.NDNav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.NDNav.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute an offset into the array of items.
Create a special <code class="docutils literal notranslate"><span class="pre">Location</span></code> for the requested index value.
The location, attribute, assigned to <code class="docutils literal notranslate"><span class="pre">base_location</span></code>, is for index == 0.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.NDNav.name">
<span class="sig-name descname"><span class="pre">name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><span class="pre">stingray.schema_instance.NDNav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.NDNav.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Locate the “$anchor” in the <code class="docutils literal notranslate"><span class="pre">Schema</span></code> and the related <code class="docutils literal notranslate"><span class="pre">Location</span></code>.
Return a new <code class="docutils literal notranslate"><span class="pre">NDNav</span></code> for the requested anchor or property name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.NDNav.raw">
<span class="sig-name descname"><span class="pre">raw</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.NDNav.raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Raw bytes (or text) from the current schema and location.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.NDNav.raw_instance">
<span class="sig-name descname"><span class="pre">raw_instance</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.NDNav.raw_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Clone a piece of this instance as a new <a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><code class="xref py py-class docutils literal notranslate"><span class="pre">NDInstance</span></code></a> object.
Since NDInstance is Union[BytesInstance, TextInstance], there are two paths:
a new bytes or a new str.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.NDNav.schema">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">schema</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></em><a class="headerlink" href="#stingray.schema_instance.NDNav.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.NDNav.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.NDNav.value" title="Permalink to this definition">¶</a></dt>
<dd><p>The final Python value from the current schema and location.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.Nav">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">Nav</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.Nav" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Protocol</span></code></p>
<p>Navigation into items by field name or index into an array.</p>
<ul class="simple">
<li><p>For Non-Delimited, names as well as indices are required for object and array navigation.</p></li>
<li><p>For Delimited, a name or an index can be used, depending on what the underlying Python
Instance object is. Dictionaries use names, lists use indices.</p></li>
<li><p>For Workbook, an index is used because we only know the cells of a row by position.</p></li>
</ul>
<p>A <code class="docutils literal notranslate"><span class="pre">Nav</span></code> is built by an <code class="docutils literal notranslate"><span class="pre">Unpacker</span></code>.
<code class="docutils literal notranslate"><span class="pre">unpacker.nav(schema,</span> <span class="pre">instance)</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Nav.dump">
<span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.Nav.dump" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Nav.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><span class="pre">stingray.schema_instance.Nav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.Nav.index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Nav.name">
<span class="sig-name descname"><span class="pre">name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><span class="pre">stingray.schema_instance.Nav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.Nav.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Nav.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.Nav.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.ObjectLocation">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">ObjectLocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">'Location'</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.ObjectLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Location</span></code></a></p>
<p>type(Schema) == ObjectSchema
The location of an object with a dictionary of named properties. A COBOL group-level item.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.ObjectLocation.dump_iter">
<span class="sig-name descname"><span class="pre">dump_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nav</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><span class="pre">stingray.schema_instance.NDNav</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.ObjectLocation.dump_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>An Iterator over tuples of (indent, Location, array indices, raw bytes, value)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.ObjectLocation.raw">
<span class="sig-name descname"><span class="pre">raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.ObjectLocation.raw" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.ObjectLocation.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.ObjectLocation.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.ObjectSchema">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">ObjectSchema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">'Schema'</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.ObjectSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Schema</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.ObjectSchema.dump_iter">
<span class="sig-name descname"><span class="pre">dump_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nav</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><span class="pre">stingray.schema_instance.Nav</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">'Schema'</span><span class="p"><span class="pre">,</span> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.ObjectSchema.dump_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield nesting, schema, indices, and object</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.ObjectSchema.print">
<span class="sig-name descname"><span class="pre">print</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hide</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.ObjectSchema.print" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.OneOfLocation">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">OneOfLocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">alternatives</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.OneOfLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Location</span></code></a></p>
<p>type(Schema) == OneOfSchema
The location of an object which has a list of REDEFINES alternatives.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.OneOfLocation.dump_iter">
<span class="sig-name descname"><span class="pre">dump_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nav</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><span class="pre">stingray.schema_instance.NDNav</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.OneOfLocation.dump_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>An Iterator over tuples of (indent, Location, array indices, raw bytes, value)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.OneOfLocation.raw">
<span class="sig-name descname"><span class="pre">raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.OneOfLocation.raw" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.OneOfLocation.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.OneOfLocation.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.OneOfSchema">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">OneOfSchema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alternatives</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">'Schema'</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.OneOfSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Schema</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.OneOfSchema.dump_iter">
<span class="sig-name descname"><span class="pre">dump_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nav</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><span class="pre">stingray.schema_instance.Nav</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">'Schema'</span><span class="p"><span class="pre">,</span> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.OneOfSchema.dump_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield nesting, schema, indices, and object</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.OneOfSchema.print">
<span class="sig-name descname"><span class="pre">print</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hide</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.OneOfSchema.print" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.OneOfSchema.type">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#stingray.schema_instance.OneOfSchema.type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.RefToLocation">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">RefToLocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">anchors</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.RefToLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Location</span></code></a></p>
<p>type(Schema) == RefToSchema
Part of REDEFINES; this is the COBOL-visible name of a path into a <code class="docutils literal notranslate"><span class="pre">OneOfLocation</span></code> alternative.</p>
<p>This could also be part of OCCURS DEPENDING ON.
If used like this, it would be the COBOL-visible name of an item with an array size.
The OCCURS DEPENDING ON doesn’t formalize this, however.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.RefToLocation.dump_iter">
<span class="sig-name descname"><span class="pre">dump_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nav</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><span class="pre">stingray.schema_instance.NDNav</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.RefToLocation.dump_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>An Iterator over tuples of (indent, Location, array indices, raw bytes, value)
These are silenced – they were already displayed in an earlier OneOf.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.RefToLocation.properties">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">properties</span></span><em class="property"><span class="pre">:</span> <span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#stingray.schema_instance.RefToLocation.properties" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.RefToLocation.raw">
<span class="sig-name descname"><span class="pre">raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.RefToLocation.raw" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.RefToLocation.referent">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">referent</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#stingray.schema_instance.Location" title="stingray.schema_instance.Location"><span class="pre">stingray.schema_instance.Location</span></a></em><a class="headerlink" href="#stingray.schema_instance.RefToLocation.referent" title="Permalink to this definition">¶</a></dt>
<dd><p>Most things refer to themselves. a RefToLocation, however, overrides this.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.RefToLocation.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.RefToLocation.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.RefToSchema">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">RefToSchema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_to</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.RefToSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Schema</span></code></a></p>
<p>Must deference type and attributes properties.</p>
<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.RefToSchema.attributes">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">attributes</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#stingray.schema_instance.RefToSchema.attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.RefToSchema.dump_iter">
<span class="sig-name descname"><span class="pre">dump_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nav</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><span class="pre">stingray.schema_instance.Nav</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">'Schema'</span><span class="p"><span class="pre">,</span> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.RefToSchema.dump_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield nesting, schema, indices, and object</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.RefToSchema.items">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">items</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></em><a class="headerlink" href="#stingray.schema_instance.RefToSchema.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.RefToSchema.properties">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">properties</span></span><em class="property"><span class="pre">:</span> <span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">'Schema'</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#stingray.schema_instance.RefToSchema.properties" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.RefToSchema.type">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#stingray.schema_instance.RefToSchema.type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.Reference">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">Reference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.Reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Protocol</span></code></p>
<p># TODO: Formalize a ref_to protocol, used by <code class="docutils literal notranslate"><span class="pre">RefToSchema</span></code> and <code class="docutils literal notranslate"><span class="pre">DependsOnArraySchema</span></code>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.Schema">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">Schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.Schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for Schema definitions.</p>
<p>This is Python class that wraps the a JSONSchema definition.
The class provides slightly simpler navigation via attribute names
instead of dictionary keys.</p>
<p>Generally, these should be seen as immutable. To permit forward
references, the RefTo subclass needs to be mutated.</p>
<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.Schema.attributes">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">attributes</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#stingray.schema_instance.Schema.attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Schema.dump_iter">
<span class="sig-name descname"><span class="pre">dump_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nav</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><span class="pre">stingray.schema_instance.Nav</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">'Schema'</span><span class="p"><span class="pre">,</span> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.Schema.dump_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield nesting, schema, indices, and value</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Schema.json">
<span class="sig-name descname"><span class="pre">json</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.Schema.json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Schema.print">
<span class="sig-name descname"><span class="pre">print</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hide</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.Schema.print" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="stingray.schema_instance.Schema.type">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#stingray.schema_instance.Schema.type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.SchemaMaker">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">SchemaMaker</span></span><a class="headerlink" href="#stingray.schema_instance.SchemaMaker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Build a Schema structure from a JSON Schema document.</p>
<p>This doesn’t do much, but it allows us to use classes to define methods 
that apply to the JSON Schema constructs instead of referring to them 
as the source document dictionaries.</p>
<p>All <code class="docutils literal notranslate"><span class="pre">$ref</span></code> names are expected to refer to explicit <code class="docutils literal notranslate"><span class="pre">:anchor</span></code> names within this schema.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="stingray.schema_instance.SchemaMaker.ATOMIC">
<span class="sig-name descname"><span class="pre">ATOMIC</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'boolean',</span> <span class="pre">'integer',</span> <span class="pre">'null',</span> <span class="pre">'number',</span> <span class="pre">'string'}</span></em><a class="headerlink" href="#stingray.schema_instance.SchemaMaker.ATOMIC" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.SchemaMaker.from_json">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.SchemaMaker.from_json" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.SchemaMaker.resolve">
<span class="sig-name descname"><span class="pre">resolve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.SchemaMaker.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve forward $ref references.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.SchemaMaker.walk_schema">
<span class="sig-name descname"><span class="pre">walk_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.SchemaMaker.walk_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Starting with JSON Schema document, create Schema objects.
Relies on an <code class="docutils literal notranslate"><span class="pre">maxItemsDependsOn</span></code> extension to describe <cite>OCCURS DEPENDING ON</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.Struct">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">Struct</span></span><a class="headerlink" href="#stingray.schema_instance.Struct" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Unpacker" title="stingray.schema_instance.Unpacker"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Unpacker</span></code></a>[<a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.NDInstance</span></code></a>]</p>
<p>Unpacker for Non-Delimited native (i.e., not EBCDIC-encoding) bytes.</p>
<p>Uses built-in <code class="xref py py-mod docutils literal notranslate"><span class="pre">struct</span></code> module for calcsize and value.
TODO: Finish this.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.TextInstance">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">TextInstance</span></span><a class="headerlink" href="#stingray.schema_instance.TextInstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
<p>Fulfills the protocol for an <code class="docutils literal notranslate"><span class="pre">NDInstance</span></code>. Useful for <code class="docutils literal notranslate"><span class="pre">TextUnpacker</span></code>.</p>
<p>To create an <a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><code class="xref py py-class docutils literal notranslate"><span class="pre">NDNav</span></code></a>, this object requires two things:
- A <cite>Schema</cite> which populates the <cite>Location</cite> objects.
- An <cite>NonDelimited</cite> subclass of <cite>Unpacker</cite> to provide physical format details like size and unpacking.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaMaker</span><span class="o">.</span><span class="n">from_json</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;field-1&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;cobol&quot;</span><span class="p">:</span> <span class="s2">&quot;PIC X(12)&quot;</span><span class="p">}}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpacker</span> <span class="o">=</span> <span class="n">TextUnpacker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">TextInstance</span><span class="p">(</span><span class="s1">&#39;blahblahblah&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpacker</span><span class="o">.</span><span class="n">nav</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s2">&quot;field-1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
<span class="go">&#39;blahblahblah&#39;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Sheet.row_iter()</span></code> build <code class="docutils literal notranslate"><span class="pre">Row</span></code> objects that wrap an unpacker, schema, and instance.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.TextUnpacker">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">TextUnpacker</span></span><a class="headerlink" href="#stingray.schema_instance.TextUnpacker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Unpacker" title="stingray.schema_instance.Unpacker"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Unpacker</span></code></a>[<a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.NDInstance</span></code></a>]</p>
<p>Unpacker for Non-Delimited text values.</p>
<p>Uses string slicing and built-ins.
This is for a native Unicode (or ASCII) text-based format.
If utf-16 is being used, this is effectively a Double-Byte Character Set used by COBOL.</p>
<p>A universal approach is to include <code class="docutils literal notranslate"><span class="pre">maxLength</span></code> (optionally <code class="docutils literal notranslate"><span class="pre">minLength</span></code>) attributes 
on each field. <code class="docutils literal notranslate"><span class="pre">maxLength</span></code> == the length of the field == <code class="docutils literal notranslate"><span class="pre">minLength</span></code>.</p>
<p>While it’s tempting to use “type”: “number” on this text data, it can be technically suspicious.
If file has strings, conversions may part of the application’s use 
of the data, not the data itself. We use a “conversion” keyword to do these conversions
from external string to internal Python object.</p>
<p>For various native bytes formats, this is a <cite>{“type”: “string”, “contentEncoding”: “struct-xxx”}</cite>
where the Python <code class="xref py py-mod docutils literal notranslate"><span class="pre">struct</span></code> module codes are used to define the number of interpretation of the bytes.</p>
<p>For COBOL, the “cobol” keyword provides USAGE and PICTURE. This defines size.
In this case, since it’s not in EBCDIC, we can use <code class="xref py py-mod docutils literal notranslate"><span class="pre">struct</span></code> to unpack COMP values.</p>
<p>This requires the “cobol” and “conversion” keywords, part of the extended vocabulary for COBOL.
A <cite>“cobol”</cite> keyword gets Usage and Picture values required to decode EBCDIC. 
A “conversion” keyword converts to a more useful Python type.</p>
<p>(An alternative approach is to use the <code class="docutils literal notranslate"><span class="pre">pattern</span></code> attribute to provide length information.
This is often {“type”: “string”, “pattern”: “^.{64}$”} or similar. This can provide a length.
Because patterns can be hard to reverse engineer, we don’t use this.)</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.TextUnpacker.calcsize">
<span class="sig-name descname"><span class="pre">calcsize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#stingray.schema_instance.TextUnpacker.calcsize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.TextUnpacker.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.TextUnpacker.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.TextUnpacker.instance_iter">
<span class="sig-name descname"><span class="pre">instance_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sheet</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.TextUnpacker.instance_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.TextUnpacker.nav">
<span class="sig-name descname"><span class="pre">nav</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.NDNav" title="stingray.schema_instance.NDNav"><span class="pre">stingray.schema_instance.NDNav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.TextUnpacker.nav" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.TextUnpacker.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_object</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">IO</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">IO</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.TextUnpacker.open" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.TextUnpacker.sheet_iter">
<span class="sig-name descname"><span class="pre">sheet_iter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.TextUnpacker.sheet_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="stingray.schema_instance.TextUnpacker.the_file">
<span class="sig-name descname"><span class="pre">the_file</span></span><em class="property"><span class="pre">:</span> <span class="pre">IO</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#stingray.schema_instance.TextUnpacker.the_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.TextUnpacker.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.NDInstance" title="stingray.schema_instance.NDInstance"><span class="pre">stingray.schema_instance.NDInstance</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.TextUnpacker.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.Unpacker">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">Unpacker</span></span><a class="headerlink" href="#stingray.schema_instance.Unpacker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">stingray.schema_instance.Instance</span></code>]</p>
<p>An Unpacker helps convert data from an <code class="docutils literal notranslate"><span class="pre">Instance</span></code>.
For NDInstances, this involves size calculations and value conversions.
For WBInstances and JSON, this is a pass-through because the sizes don’t matter and
the values are already Native Python objects.</p>
<p>An Unpacker is a generic procotol. A class that implements the protocol <strong>should</strong>
provide all of the methods.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Unpacker.calcsize">
<span class="sig-name descname"><span class="pre">calcsize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#stingray.schema_instance.Unpacker.calcsize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Unpacker.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.Unpacker.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Unpacker.nav">
<span class="sig-name descname"><span class="pre">nav</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">stingray.schema_instance.Instance</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><span class="pre">stingray.schema_instance.Nav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.Unpacker.nav" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Unpacker.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_object</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">IO</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">IO</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.Unpacker.open" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Unpacker.sheet_iter">
<span class="sig-name descname"><span class="pre">sheet_iter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#stingray.schema_instance.Unpacker.sheet_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Unpacker.used">
<span class="sig-name descname"><span class="pre">used</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.Unpacker.used" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.Unpacker.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">stingray.schema_instance.Instance</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.Unpacker.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.WBInstance">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">WBInstance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.WBInstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Protocol</span></code></p>
<p>CSV files are <code class="docutils literal notranslate"><span class="pre">list[str]</span></code>. All other workbooks tend to be  <code class="docutils literal notranslate"><span class="pre">list[Any]</span></code>
because their unpacker modules do conversions.
We’ll tolerate any sequence type.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.WBInstance.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.WBInstance" title="stingray.schema_instance.WBInstance"><span class="pre">stingray.schema_instance.WBInstance</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.WBInstance.schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.WBInstance.unpacker">
<span class="sig-name descname"><span class="pre">unpacker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unpacker</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.WBUnpacker" title="stingray.schema_instance.WBUnpacker"><span class="pre">stingray.schema_instance.WBUnpacker</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.WBInstance" title="stingray.schema_instance.WBInstance"><span class="pre">stingray.schema_instance.WBInstance</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.WBInstance.unpacker" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.WBNav">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">WBNav</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unpacker</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Unpacker" title="stingray.schema_instance.Unpacker"><span class="pre">stingray.schema_instance.Unpacker</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#stingray.schema_instance.WBInstance" title="stingray.schema_instance.WBInstance"><span class="pre">stingray.schema_instance.WBInstance</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.WBInstance" title="stingray.schema_instance.WBInstance"><span class="pre">stingray.schema_instance.WBInstance</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stingray.schema_instance.WBNav" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Nav</span></code></a></p>
<p>Navigate through a workbook <code class="docutils literal notranslate"><span class="pre">WBInstance</span></code> using a <code class="docutils literal notranslate"><span class="pre">Schema</span></code>.</p>
<p>A Workbook Row is a <code class="docutils literal notranslate"><span class="pre">Sequence[Any]</span></code> of cell values. Therefore, navigation
by name translates to a position within the <code class="docutils literal notranslate"><span class="pre">WBInstance</span></code> row.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.WBNav.dump">
<span class="sig-name descname"><span class="pre">dump</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#stingray.schema_instance.WBNav.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Navigates a Workbook instance schema and values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.WBNav.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.WBNav" title="stingray.schema_instance.WBNav"><span class="pre">stingray.schema_instance.WBNav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.WBNav.index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.WBNav.name">
<span class="sig-name descname"><span class="pre">name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.WBNav" title="stingray.schema_instance.WBNav"><span class="pre">stingray.schema_instance.WBNav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.WBNav.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.WBNav.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.WBNav.value" title="Permalink to this definition">¶</a></dt>
<dd><p>The final Python value from the current schema – relies on the Unpacker.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="stingray.schema_instance.WBUnpacker">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">WBUnpacker</span></span><a class="headerlink" href="#stingray.schema_instance.WBUnpacker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stingray.schema_instance.Unpacker" title="stingray.schema_instance.Unpacker"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.Unpacker</span></code></a>[<a class="reference internal" href="#stingray.schema_instance.WBInstance" title="stingray.schema_instance.WBInstance"><code class="xref py py-class docutils literal notranslate"><span class="pre">stingray.schema_instance.WBInstance</span></code></a>]</p>
<p>Unpacker for Workbook-defined values.</p>
<p>Most of WBInstances defer to another module for unpacking.
CSV, however, relies on the <code class="xref py py-mod docutils literal notranslate"><span class="pre">csv</span></code> module, where the instance is <code class="docutils literal notranslate"><span class="pre">list[str]</span></code>.</p>
<p>While it’s tempting to use “type”: “number” on CSV data, it’s technically suspicious.
The file has strings, and only strings. Conversions are part of the application’s use 
of the data, not the data itself. The schema can use the <code class="docutils literal notranslate"><span class="pre">&quot;conversion&quot;</span></code> keyword
to specify one of the conversion functions.</p>
<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.WBUnpacker.calcsize">
<span class="sig-name descname"><span class="pre">calcsize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#stingray.schema_instance.WBUnpacker.calcsize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.WBUnpacker.nav">
<span class="sig-name descname"><span class="pre">nav</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.WBInstance" title="stingray.schema_instance.WBInstance"><span class="pre">stingray.schema_instance.WBInstance</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#stingray.schema_instance.Nav" title="stingray.schema_instance.Nav"><span class="pre">stingray.schema_instance.Nav</span></a></span></span><a class="headerlink" href="#stingray.schema_instance.WBUnpacker.nav" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="stingray.schema_instance.WBUnpacker.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.Schema" title="stingray.schema_instance.Schema"><span class="pre">stingray.schema_instance.Schema</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#stingray.schema_instance.WBInstance" title="stingray.schema_instance.WBInstance"><span class="pre">stingray.schema_instance.WBInstance</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#stingray.schema_instance.WBUnpacker.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stingray.schema_instance.decimal_2">
<span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">decimal_2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">decimal.Decimal</span></span></span><a class="headerlink" href="#stingray.schema_instance.decimal_2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stingray.schema_instance.decimal_places">
<span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">decimal_places</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">digits</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">decimal.Decimal</span></span></span><a class="headerlink" href="#stingray.schema_instance.decimal_places" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stingray.schema_instance.digit_string">
<span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">digit_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">SupportsInt</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#stingray.schema_instance.digit_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stingray.schema_instance.digits_5">
<span class="sig-prename descclassname"><span class="pre">stingray.schema_instance.</span></span><span class="sig-name descname"><span class="pre">digits_5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">SupportsInt</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#stingray.schema_instance.digits_5" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/Stingray_belon1553_small.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">Stingray-Reader</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Design Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer.html">Using <strong>Stingray Reader</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo/index.html">Demo Applications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">stingray</a></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">Commercial Use</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="modules.html">stingray</a><ul>
  <li><a href="stingray.html">stingray package</a><ul>
      <li>Previous: <a href="stingray.implementations.html" title="previous chapter">stingray.implementations module</a></li>
      <li>Next: <a href="stingray.workbook.html" title="next chapter">stingray.workbook module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, S.Lott.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/apidoc/stingray.schema_instance.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>